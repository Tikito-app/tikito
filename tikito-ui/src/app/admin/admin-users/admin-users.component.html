<div class="main-side-column main-column">
  <button mat-button (click)="routeToAdmin();"><mat-icon>arrow_back</mat-icon> {{'admin/back-to-admin' | translate}}</button>
</div>

<div class="main-center-column-small main-column">
  <div class="mat-elevation-z8" *ngIf="dataSource && !userSelected">
    <table mat-table [dataSource]="dataSource">

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>{{ 'admin/users/name' | translate }}</th>
        <td mat-cell *matCellDef="let element"> {{ element.email }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="onRowClicked(row)" class="clickable"></tr>
    </table>

    <app-paginator></app-paginator>
  </div>

  <mat-card class="full-width" *ngIf="userSelected">
    <mat-card-header>
      <mat-card-title>{{'admin/users/edit' | translate}}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="form">
        <ng-container>
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>{{'email' | translate}}</mat-label>
            <input type="text" [attr.data-cy]="'email'" id="email" matInput formControlName="email">
            <mat-icon matSuffix>email</mat-icon>
          </mat-form-field>
          <br/>
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>{{'admin/users/password' | translate}}</mat-label>
            <input [attr.data-cy]="'password'" [type]="showPasswordFlag ? 'text' : 'password'" id="password" matInput placeholder="Password" formControlName="password">
            <mat-icon class="clickable" (click)="showPasswordFlag=!showPasswordFlag" matSuffix>{{ showPasswordFlag ? 'visibility' : 'visibility_off' }}</mat-icon>
          </mat-form-field>
          <br/>
          <mat-error *ngIf="errorMessage">{{errorMessage}}</mat-error>
        </ng-container>
        <button mat-raised-button color="primary" (click)="onSaveClicked()">{{'save' | translate}}</button>&nbsp;
        <button mat-raised-button color="secondary" (click)="onCancelClicked()">{{'cancel' | translate}}</button>
      </form>
    </mat-card-content>
  </mat-card>
</div>

<div class="main-side-column main-column">
</div>
